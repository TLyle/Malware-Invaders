using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class Sound : MonoBehaviour {
	public AudioSource son;
	public AudioSource musiq;
	public Switch musique;
	public Switch sfx;
	public GameObject reglage;

	public void Start(){
		if (PlayerPrefs.HasKey ("msq")) {
			if (PlayerPrefs.GetInt ("msq") == 1)
				musiq.mute = true;
		}
		if (PlayerPrefs.HasKey ("sfx")) {
			if (PlayerPrefs.GetInt ("sfx") == 1)
				son.mute = true;
		}
		
	}

	public void Update(){
		if (reglage.activeInHierarchy) {
			if (PlayerPrefs.HasKey ("msq")) {
				if (PlayerPrefs.GetInt ("msq") == 1)
					musique.isOn = true;
				else
					musique.isOn = false;
			}
			if (PlayerPrefs.HasKey ("sfx")) {
				if (PlayerPrefs.GetInt ("sfx") == 1)
					sfx.isOn = true;
				else
					sfx.isOn = false;
			}
		}
	}

	public void PlaySound(){
		if(son.isActiveAndEnabled)
			son.PlayOneShot(son.clip);
	}

	public void MusiqueSfx(){
		Musique ();
		Sfx ();
	}

	public void Musique(){
		if (musique.isOn)
			PlayerPrefs.SetInt ("msq", 1);
		else
			PlayerPrefs.SetInt ("msq", 0);
	}

	public void Sfx(){
		if (sfx.isOn)
			PlayerPrefs.SetInt ("sfx", 1);
		else
			PlayerPrefs.SetInt ("sfx", 0);
	}
}
